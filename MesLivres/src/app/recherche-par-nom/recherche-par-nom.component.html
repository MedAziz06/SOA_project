<!-- Méthode 3 : Recherche avec Pipe -->
<div class="card shadow-sm mb-4">
  <div class="card-header bg-warning text-dark">
    <h5 class="m-0"><i class="bi bi-funnel me-2"></i>Recherche avec Pipe</h5>
  </div>
  <div class="card-body">
    <label for="pipeSearch" class="form-label fw-bold">Filtrer avec Pipe</label>
    <input [(ngModel)]="searchTerm"
           name="searchTerm"
           id="pipeSearch"
           class="form-control form-control-lg"
           placeholder="Tapez pour filtrer...">
  </div>
</div>

<!-- Résultats avec Pipe -->
@if (livres && livres.length > 0) {
  <div class="card shadow-lg border-0">
    <div class="card-header bg-danger text-white py-3">
      <h5 class="m-0">
        <i class="bi bi-card-list me-2"></i>Résultats filtrés (Pipe)
        <span class="badge bg-light text-dark ms-2">
          {{ (livres | searchFilter: searchTerm).length }}
        </span>
      </h5>
    </div>
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover table-striped mb-0">
          <thead class="table-dark">
            <tr>
              <th>#</th>
              <th>ID</th>
              <th>Nom du Livre</th>
              <th>Prix</th>
              <th>Date de Création</th>
              <th>Auteur</th>
            </tr>
          </thead>
          <tbody>
            @for (livre of livres | searchFilter: searchTerm; track livre.idLivre; let index = $index) {
              <tr>
                <td class="fw-bold">{{ index + 1 }}</td>
                <td><span class="badge bg-secondary">{{ livre.idLivre }}</span></td>
                <td>
                  <i class="bi bi-book text-primary me-2"></i>
                  {{ livre.nomLivre }}
                </td>
                <td><strong class="text-success">{{ livre.prixLivre }}€</strong></td>
                <td>{{ livre.dateCreation | date: 'dd/MM/yyyy' }}</td>
                <td>
                  @if (livre.auteur) {
                    <span class="badge bg-info text-dark">
                      <i class="bi bi-person-fill me-1"></i>
                      {{ livre.auteur.prenomAuteur }} {{ livre.auteur.nomAuteur }}
                    </span>
                  } @else {
                    <span class="badge bg-warning">PAS D'AUTEUR</span>
                  }
                </td>
              </tr>
            }
          </tbody>
        </table>
      </div>
    </div>
  </div>
}
